<link rel="import" href="../polymer/polymer.html">

<script>
  Polymer({
    is: 'carbon-router',
    properties: {
      route: {
        type: Object,
        value: null,
        notify: true
      },

      queryParams: {
        type: Object,
        value: function() {return {};},
        notify: true,
      },

      path: {
        type: String,
        notify: true
      }
    },
    observers: [
      '_locationChanged(path, queryParams)',
      '_routeChanged(route.prefix, route.path)',
      '_routeQueryParamsChanged(route.queryParams)'
    ],

    _locationChanged: function(path, queryParams) {
      this.route = {
        prefix: '',
        path: path,
        queryParams: queryParams
      };
    },

    _routeChanged: function() {
      if (!this.route) {
        return;
      }
      this.path = this.route.prefix + this.route.path;
    },

    _routeQueryParamsChanged: function() {
      if (!this.route) {
        return;
      }
      this.queryParams = this.route.queryParams;
    }

  });
</script>
